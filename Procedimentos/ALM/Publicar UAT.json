{"source":2,"revision":15,"description":null,"createdBy":{"displayName":"Gustavo Guello","url":"https://spsprodcus1.vssps.visualstudio.com/Adc201602-a585-4206-b044-8840b4414b8e/_apis/Identities/34c08761-355d-4f1b-b39a-d8f373362f65","_links":{"avatar":{"href":"https://smartconsultingtfs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk"}},"id":"34c08761-355d-4f1b-b39a-d8f373362f65","uniqueName":"gustavo@smartconsulting.com.br","imageUrl":"https://smartconsultingtfs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk","descriptor":"aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk"},"createdOn":"2023-02-10T21:34:09.330Z","modifiedBy":{"displayName":"Gustavo Guello","url":"https://spsprodcus1.vssps.visualstudio.com/Adc201602-a585-4206-b044-8840b4414b8e/_apis/Identities/34c08761-355d-4f1b-b39a-d8f373362f65","_links":{"avatar":{"href":"https://smartconsultingtfs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk"}},"id":"34c08761-355d-4f1b-b39a-d8f373362f65","uniqueName":"gustavo@smartconsulting.com.br","imageUrl":"https://smartconsultingtfs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk","descriptor":"aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk"},"modifiedOn":"2023-02-16T12:59:26.040Z","isDeleted":false,"lastRelease":{"id":15,"name":"Release-15","artifacts":[],"_links":{},"description":"","releaseDefinition":{"id":1,"projectReference":null,"_links":{}},"createdOn":"2023-02-16T13:02:01.507Z","createdBy":{"displayName":"Gustavo Guello","url":"https://spsprodcus1.vssps.visualstudio.com/Adc201602-a585-4206-b044-8840b4414b8e/_apis/Identities/34c08761-355d-4f1b-b39a-d8f373362f65","_links":{"avatar":{"href":"https://smartconsultingtfs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk"}},"id":"34c08761-355d-4f1b-b39a-d8f373362f65","uniqueName":"gustavo@smartconsulting.com.br","imageUrl":"https://smartconsultingtfs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk","descriptor":"aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk"}},"variables":{},"variableGroups":[2],"environments":[{"id":1,"name":"Publicar em UAT","rank":1,"owner":{"displayName":"Gustavo Guello","url":"https://spsprodcus1.vssps.visualstudio.com/Adc201602-a585-4206-b044-8840b4414b8e/_apis/Identities/34c08761-355d-4f1b-b39a-d8f373362f65","_links":{"avatar":{"href":"https://smartconsultingtfs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk"}},"id":"34c08761-355d-4f1b-b39a-d8f373362f65","uniqueName":"gustavo@smartconsulting.com.br","imageUrl":"https://smartconsultingtfs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk","descriptor":"aad.MDlkODU1M2QtMGE2ZC03YTc2LWFjNDktYWEwM2NjNjM5MDZk"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":1}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":2},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":3}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"windows-latest"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[{"alias":"solucoes","artifactType":"Build","artifactDownloadMode":"All","artifactItems":[]}]},"queueId":1454,"demands":[],"enableAccessToken":true,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"8015465b-f367-4ec4-8215-8edf682574d3","version":"2.*","name":"Power Platform Tool Installer ","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"DefaultVersion":"true","PowerAppsAdminVersion":"(obsolete)","XrmToolingPackageDeploymentVersion":"(obsolete)","MicrosoftPowerAppsCheckerVersion":"(obsolete)","CrmSdkCoreToolsVersion":"(obsolete)","XrmOnlineManagementApiVersion":"(obsolete)"}},{"environment":{},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"Atualiza a variável da versão","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$VariableGroupId = 2\n$NewValue = $(Versao) + 1\n$VariableName = \"Versao\"\n\nWrite-Host \"NewValue : $NewValue\"\n\n$url = \"$($env:SYSTEM_TEAMFOUNDATIONCOLLECTIONURI)$env:SYSTEM_TEAMPROJECTID/_apis/distributedtask/variablegroups/$($VariableGroupId)?api-version=5.1-preview.1\"\n\nWrite-Host \"URL: $url\"\n\n$authHeader = @{Authorization = \"Bearer $env:SYSTEM_ACCESSTOKEN\"}\n$definition = Invoke-RestMethod -Uri $url -Headers $authHeader\n\nWrite-Host \"Pipeline = $($definition | ConvertTo-Json -Depth 100)\"\n\n$definition.variables.$VariableName.Value = \"$($NewValue)\"\n$definitionJson = $definition | ConvertTo-Json -Depth 100 -Compress\n\nInvoke-RestMethod -Method Put -Uri $url -Headers $authHeader -ContentType \"application/json\" -Body ([System.Text.Encoding]::UTF8.GetBytes($definitionJson)) | Out-Null\n","errorActionPreference":"stop","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","progressPreference":"silentlyContinue","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"}},{"environment":{},"taskId":"2c73f444-efd5-46b6-9416-44273166267b","version":"2.*","name":"Power Platform Set Solution Version ","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"432f9ec7-2798-45ee-b2f8-2e5c0f46b9fd","SolutionName":"$(Solucao)","SolutionVersionNumber":"$(Release).$(Versao).$(Subversao).0"}},{"environment":{},"taskId":"fb4a48f1-0eeb-4909-9e47-9bc290e1cb89","version":"2.*","name":"Power Platform Import Solution ","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"780588d8-b579-4d23-a622-1b636fc4db7e","Environment":"$(BuildTools.EnvironmentUrl)","SolutionInputFile":"$(System.DefaultWorkingDirectory)/solucoes/solucoes/$(Solucao)_managed.zip","UseDeploymentSettingsFile":"true","DeploymentSettingsFile":"$(System.DefaultWorkingDirectory)/solucoes/solucoes/UATSetting.json","AsyncOperation":"true","MaxAsyncWaitTime":"60","HoldingSolution":"true","OverwriteUnmanagedCustomizations":"true","ActivatePlugins":"true","SkipProductUpdateDependencies":"false","ConvertToManaged":"true","PublishCustomizationChanges":"false","PublishWorkflows":"true"}},{"environment":{},"taskId":"44baeac4-f767-4cb9-83e8-d210ce763397","version":"2.*","name":"Power Platform Apply Solution Upgrade ","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"780588d8-b579-4d23-a622-1b636fc4db7e","Environment":"$(BuildTools.EnvironmentUrl)","SolutionName":"$(Solucao)","AsyncOperation":"true","MaxAsyncWaitTime":"60"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":15,"url":"https://smartconsultingtfs.vsrm.visualstudio.com/c7e9177d-a69b-45a2-a10e-0774a5dc2cae/_apis/Release/releases/15","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://smartconsultingtfs.vsrm.visualstudio.com/_apis/public/Release/badge/c7e9177d-a69b-45a2-a10e-0774a5dc2cae/1/1"}],"artifacts":[{"sourceId":"c7e9177d-a69b-45a2-a10e-0774a5dc2cae:12","type":"Build","alias":"solucoes","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://smartconsultingtfs.visualstudio.com/_permalink/_build/index?collectionId=28495538-810c-499b-af30-78f35266dc23&projectId=c7e9177d-a69b-45a2-a10e-0774a5dc2cae&definitionId=12","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"12","name":"Gustavo Guello-Exportacao e Build"},"definitions":{"id":"","name":""},"IsMultiDefinitionType":{"id":"False","name":"False"},"project":{"id":"c7e9177d-a69b-45a2-a10e-0774a5dc2cae","name":"Gustavo Guello"},"repository":{"id":"","name":""}},"isPrimary":true,"isRetained":false}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseNew"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":1,"name":"Publicar UAT","path":"\\","projectReference":null,"url":"https://smartconsultingtfs.vsrm.visualstudio.com/c7e9177d-a69b-45a2-a10e-0774a5dc2cae/_apis/Release/definitions/1","_links":{"self":{"href":"https://smartconsultingtfs.vsrm.visualstudio.com/c7e9177d-a69b-45a2-a10e-0774a5dc2cae/_apis/Release/definitions/1"},"web":{"href":"https://smartconsultingtfs.visualstudio.com/c7e9177d-a69b-45a2-a10e-0774a5dc2cae/_release?definitionId=1"}}}